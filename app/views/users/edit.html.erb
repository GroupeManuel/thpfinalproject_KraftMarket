<% title('Mon profil - KraftMarket') %>

<div class='padding-top-0' id='dashboard'>

	<%= render 'users/private_profile/profile_tabs' %>

  	<div class="dashboard-content">
		<!-- Tab-content displaying forms to modify personal info from the user -->
		  <div class='profile-tab-content' id="profile-info"  >

        <!-- Titlebar -->
        <div id="titlebar">
          <div class="row">
            <div class="col-md-12">
              <h2>Détails du profil</h2>
              <!-- Breadcrumbs -->
              <nav id="breadcrumbs" class='text-right'>
                <ul>
                    <li><%= link_to "Accueil", root_path %></li>
                  <li><%= link_to "Mon profil", user_path(@user.id) %></li>
                  <li><%= link_to "Détails du profil" %></li>
                </ul>
              </nav>
            </div>
          </div>
        </div>

        <div class='margin-bottom-15'>
          <%= form_for(@user, url: user_path(@user.id), html: { method: :put, class:'row'}) do |f| %>

          <!-- Form to update id information -->
          <div class='profile-section-content w-100' id="personal-info" >
            <div class='row'>
              <div class='col-md-12 col-lg-6'><%= render 'users/private_profile/edit/edit_personal_info', f:f %></div>
              <div class='col-md-12 col-lg-6'><%= render 'users/private_profile/edit/edit_delivery_address', f:f %></div>
            </div>
              <div class="d-flex justify-content-center row">
                <%= f.submit "Sauvegarder", class:'button margin-top-15' %>
            </div>
          </div>

          <!-- Form to update company information -->
          <div class='profile-section-content w-100'  id="company-info" >
            <div class='row'>
              <div class='col-md-12 col-lg-6'><%= render 'users/private_profile/edit/edit_company_info', f:f %></div>
              <div class='col-md-12 col-lg-6'><%= render 'users/private_profile/edit/edit_invoice_address', f:f %></div>
            </div>
              <div class="d-flex justify-content-center row">
                <%= f.submit "Sauvegarder", class:'button margin-top-15 mx-auto' %>
            </div>
          </div>

        <% end %>

        <!-- Form to update password with devise, using UsersHelper -->
          <div class='profile-section-content w-100' id="password-info">
            <%= render 'devise/registrations/edit_password' %>
          </div>

        </div>


	  	</div>
  	</div>
</div>


<script type="text/javascript">
  $(document).ready(function() {
    $('footer').hide();
    $('li.profile-tab#profile-info').addClass('active');
    $('.profile-section-content').hide(); //Hide all tabs
    $('.profile-section-content#personal-info').show(); //Hide all tabs

    $('li.profile-tab#profile-info').on('click',function(e){
    	e.preventDefault();
    });

    $('li.profile-section-tab').on('click', function(e) {
      e.preventDefault();
      $('.profile-section-content').hide(); //Hide all tabs
      $('.profile-section-content#'+e.target.id).show(); //Hide all tabs
    })
  });

</script>